---
title: "Advanced Queries with GraphQL+-"
redirect_from:
  - /slash-graphql/advanced-queries/
---

<h1>{props.pageContext.frontmatter.title}</h1>

*These are draft docs for Slash GraphQL, which is currently in beta*

Slash GraphQL also supports running advanced queries with `GraphQL+-`, a query language that is unique to Dgraph. GraphQL+- should be used by advanced users who wish to make queries and mutations using existing Dgraph client libraries, either via the HTTP or gRPC endpoints. You can learn more about existing client libraries by following this [documentation](https://dgraph.io/docs/clients/).

If you are getting started with Slash GraphQL, you might want to consider using our [GraphQL APIs](https://graphql.dgraph.io/doc/) instead. It will get you quickly started on the basics of using Slash GraphQL before you go into advanced topics. 

Do note that Slash GraphQL does not allow you to change the schema or create new predicates via GraphQL+-. You will not be able to access the `/alter` endpoint. You can add your schema via Slash GraphQL (either UI or API) and then add your mutations according to your Schema using GraphQL+-.

## Authentication and Endpoint

It is important to note that all APIs must be authenticated by an API key from the settings page. This can be accessed via Slash GraphQL UI, navigate to the [settings](https://slash.dgraph.io/_/settings) tab and you will see an option to create a new API key. Make sure to keep your API key safe, it will not be accessible once you navigate away from the page. Your API key will never expire so you don't have to worry about changing your API key. 

### HTTP
You will be able to find your base URL (GraphQL Endpoint) on your [Dashboard](https://slash.dgraph.io/_/dashboard) after your deployment is up. You will have access to `/mutate`, `/query` and `/commit` endpoints that you can use as per your convenience. 

For HTTP requests, you need to make sure that the correct `Content-Type` header is sent for `/mutate` and `/query` requests. For mutations, you will be sending `Content-Type: application/rdf` and for queries, you will be sending `Content-Type: application/graphql+-`.

You will also need to make sure that you pass the correct Authentication Header. The Authentication Header should be passed as `X-Auth-Token: <api-key>`. This holds true for all three available endpoints. If your Authentication Header is wrong, your requests will be rejected. You can get your API key from the settings page as described above. If you lose your API key, you can create a new one from the settings page but make sure you keep this one safe. 

For the given GraphQL Schema:
```graphql
type Person {
 name: String! @search(by: [fulltext])
 age: Int
 country: String
}
```

Here is an example of a cURL for `/mutate` endpoint:
```cURL
curl -H "Content-Type: application/rdf" -H "x-auth-token: <api-key>" -X POST "<graphql-endpoint>/mutate?commitNow=true" -d $'
{
 set {
    _:x <Person.name> "John" .
    _:x <Person.age> "30" .
    _:x <Person.country> "US" .
 }
}'
```
Here is an example of a cURL for `/query` endpoint:
```
curl -H "Content-Type: application/graphql+-" -H "x-auth-token: <api-key>" -XPOST "<graphql-endpoint>/query" -d '{
   queryPerson(func: type(Person))  {
     Person.name
     Person.age
     Person.country
  }
}'
```

### gRPC
For gRPC requests your API key must be passed in as metadata to every request. If you fail to pass your API key or if the value is wrong, your requests will be rejected. 

For example, if your GraphQL Endpoint is `https://sty-fry-8.eu-central-1.aws.cloud.dgraph.io/graphql`, your gRPC endpoint will be `sty-fry-8.grpc.eu-central-1.aws.cloud.dgraph.io`. 

Here is an example which uses the [pydgraph client](https://github.com/dgraph-io/pydgraph) to make gRPC requests. 

For initial setup, make sure you import the right packages and setup your `HOST` and `PORT` correctly.

```python
import grpc
import sys
import json
from operator import itemgetter

import pydgraph


GRPC_HOST = "sty-fry-8.grpc.eu-central-1.aws.cloud.dgraph.io"
GRPC_PORT = "443"
```

You will then need to pass your API key as follows: 
```python
creds = grpc.ssl_channel_credentials()
call_credentials = grpc.metadata_call_credentials(lambda context, callback: callback((("authorization", "<api-key>"),), None))
composite_credentials = grpc.composite_channel_credentials(creds, call_credentials)
client_stub = pydgraph.DgraphClientStub('{host}:{port}'.format(host=GRPC_HOST, port=GRPC_PORT), composite_credentials)
client = pydgraph.DgraphClient(client_stub)
```

For mutations, you can use the following example:
```python
mut = """
{
  "set": [
    {
      "Person.name": "Balaji",
      "Person.age": 23,
      "Person.country": "India"
    },
    {
      "Person.name": "Daniel",
      "Person.age": 25,
      "Person.country": "San Diego"
    }
  ]
}
"""

txn = client.txn()
try:
  res = txn.mutate(set_obj=mut)
  ppl = json.loads(res.json)
  print(ppl)
finally:
  txn.discard()
```

And for a query you can use the following example:
```python
query = """
{ 
   queryPerson(func: type(Person))  { 
     Person.name
     Person.age
     Person.country
  }
}"""
txn = client.txn()
try:
  res = txn.query(query)
  ppl = json.loads(res.json)
  print(ppl)
finally:
  txn.discard()
```

## Limitations

It should be possible to use most GRPC based libraries to access . We will add support to ratel and dgraph-js-http. We will also be figuring out a way to get this to work with live loader. Please watch out for releases.
